<!DOCTYPE html>
<html>
<head>
    <title>Our Valentine Journey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --pink: #ffafcc; --red: #ff4d6d; --bg: #fff0f3; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Arial', sans-serif; touch-action: manipulation; }
        
        /* 0. Start Button Overlay */
        #start-overlay {
            position: fixed; width: 100%; height: 100%; background: var(--pink);
            display: flex; align-items: center; justify-content: center; z-index: 1000;
        }
        #btn-play {
            padding: 20px 40px; font-size: 1.5rem; font-weight: bold; color: white;
            background: var(--red); border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); transition: transform 0.2s;
        }
        #btn-play:active { transform: scale(0.9); }

        /* 1. Splash Screen */
        #splash {
            display: none; position: fixed; width: 100%; height: 100%; background: var(--pink);
            align-items: center; justify-content: center; color: white; 
            font-size: 2.5rem; font-weight: bold; z-index: 300; text-align: center;
        }

        /* 2. Intro Picture */
        #intro-pic {
            display: none; position: fixed; width: 100%; height: 100%; 
            background: white; z-index: 200; align-items: center; justify-content: center;
        }
        #intro-pic img { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* 3. Game Environment */
        #game { display: none; width: 100vw; height: 100vh; position: relative; }
        #path { position: absolute; bottom: 0; width: 100%; height: 150px; background: #fbc4ab; border-top: 5px solid #f08080; }
        .garden {
            position: absolute; width: 100%; height: 120px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><text y="15" font-size="12">üå∏üåπüå∑üåªüå∫</text></svg>');
            background-repeat: repeat-x;
        }

        /* Characters */
        .sprite { position: absolute; bottom: 80px; width: 80px; height: 80px; transition: left 0.2s; object-fit: contain; }
        #boy { left: 50px; z-index: 5; }
        #card-item { left: 450px; cursor: pointer; font-size: 50px; width: auto; height: auto; }
        #girl { right: 80px; display: none; }

        /* Pop-up Card */
        #card-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 500; align-items: center; justify-content: center;
        }
        #photo-card {
            background: white; padding: 15px; border: 8px solid var(--red);
            border-radius: 20px; position: relative; text-align: center;
            max-width: 85%; max-height: 80vh; display: flex; flex-direction: column;
        }
        #photo-card img { max-height: 60vh; max-width: 100%; border-radius: 10px; object-fit: contain; }
        #close-btn {
            position: absolute; top: -15px; right: -15px; background: var(--red); color: white;
            border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center;
            justify-content: center; cursor: pointer; font-weight: bold; border: 3px solid white;
        }

        #final-msg {
            display: none; position: fixed; top: 20%; width: 100%; 
            text-align: center; color: var(--red); font-size: 2rem; font-weight: bold;
            text-shadow: 2px 2px white; z-index: 10;
        }

        .confetti { position: absolute; font-size: 30px; animation: fly 1.5s forwards; pointer-events: none; }
        @keyframes fly { 0% { transform: scale(1); opacity: 1; } 100% { transform: translateY(-300px) rotate(720deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="start-overlay">
        <button id="btn-play" onclick="beginExperience()">Start Valentine Adventure ‚ù§Ô∏è</button>
    </div>

    <div id="splash">üíñ Happy Valentine's Day! üíñ</div>

    <div id="intro-pic">
        <img src="intro-pic.jpg">
    </div>

    <div id="game">
        <div id="final-msg">I love you more than anything! ‚ù§Ô∏è<br>Forever & Always</div>
        <div class="garden" style="bottom: 155px;"></div>
        <div id="path"></div>
        <div class="garden" style="bottom: 10px; opacity: 0.6;"></div>

        <img id="boy" class="sprite" src="boy.png">
        <div id="card-item" class="sprite">üíå</div>
        <img id="girl" class="sprite" src="girl.png">

        <div id="card-overlay">
            <div id="photo-card">
                <div id="close-btn" onclick="closeCard()">‚úï</div>
                <img src="us.jpg">
                <p style="color: var(--red); font-size: 1.2rem; font-weight: bold; margin-top: 10px;">I Love You! ‚ù§Ô∏è</p>
            </div>
        </div>
    </div>

    <script>
        const startOverlay = document.getElementById('start-overlay');
        const splash = document.getElementById('splash');
        const introPic = document.getElementById('intro-pic');
        const game = document.getElementById('game');
        const boy = document.getElementById('boy');
        const overlay = document.getElementById('card-overlay');
        const cardItem = document.getElementById('card-item');
        const girl = document.getElementById('girl');
        const finalMsg = document.getElementById('final-msg');
        
        let pos = 50;
        let hasOpenedCard = false;

        // Sequence Controller
        function beginExperience() {
            startOverlay.style.display = 'none';
            splash.style.display = 'flex';

            // 1. Show Splash (2 seconds)
            setTimeout(() => {
                splash.style.display = 'none';
                introPic.style.display = 'flex';

                // 2. Show Intro Pic (3 seconds)
                setTimeout(() => {
                    introPic.style.display = 'none';
                    game.style.display = 'block';
                }, 3000);

            }, 2000);
        }

        // Controls
        window.addEventListener('keydown', (e) => {
            if (game.style.display === 'block' && overlay.style.display !== 'flex') {
                if (e.key === 'ArrowRight') moveForward();
            }
        });

        document.addEventListener('touchstart', () => {
            if (game.style.display === 'block' && overlay.style.display !== 'flex') moveForward();
        });

        function moveForward() {
            pos += 40;
            boy.style.left = pos + 'px';

            if (!hasOpenedCard && pos >= 400) {
                overlay.style.display = 'flex';
                hasOpenedCard = true;
            }
            
            if (hasOpenedCard && overlay.style.display === 'none' && pos >= (window.innerWidth - 180)) {
                celebrate();
            }
        }

        function closeCard() {
            overlay.style.display = 'none';
            cardItem.style.display = 'none';
            girl.style.display = 'block';
        }

        function celebrate() {
            finalMsg.style.display = 'block';
            for(let i=0; i<30; i++) {
                setTimeout(() => {
                    let c = document.createElement('div');
                    c.className = 'confetti';
                    c.innerHTML = ['üéâ','‚ù§Ô∏è','‚ú®','üíñ'][Math.floor(Math.random()*4)];
                    c.style.left = (pos + (Math.random()*150 - 75)) + 'px';
                    c.style.bottom = '150px';
                    document.body.appendChild(c);
                }, i * 100);
            }
        }
    </script>
</body>
</html>